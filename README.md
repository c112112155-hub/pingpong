# HH3-Ping-Pong程式碼概述(變速球)
這個設計實現了一個基於 FPGA 的乒乓球遊戲，主要利用狀態機（FSM）來處理遊戲邏輯，並透過時脈除頻器（CLK_DIV）來減慢 LED 燈的移動速度，使其足夠慢，方便玩家觀察球的運動。設計中定義了多個腳位，包括主時脈信號 i_clk，重置信號 i_rst（低電平有效），以及左右玩家的開關信號 i_swL 和 i_swR，最後是輸出到 8 顆 LED 燈的訊號 o_led，用來顯示球的位置。

在遊戲邏輯中，設計使用了四個狀態來控制遊戲進程：MovingR（球向右移動）、MovingL（球向左移動）、Lwin（左側玩家得分）和 Rwin（右側玩家得分）。此外，還有一些輔助訊號來幫助處理遊戲狀態，例如 state（當前狀態）、prev_state（上一個狀態，用來判斷得分時機）、led_r（控制 LED 的內部信號，表示球的位置），以及用來記錄左右玩家得分的 scoreL 和 scoreR。還有一個 slow_clk 訊號，這是經過時脈除頻後的較慢時脈，主要用來控制 LED 燈的移動速度。

設計的核心處理分為三個主要模塊。首先是 CLK_DIV 時脈除頻器，它將高速的系統時脈 i_clk 轉換為較慢的 slow_clk，使得 LED 的顯示速度適合人眼觀察。這是通過一個 25 位元的計數器 cnt 來實現的，當計數器達到一半（即 cnt(23)）時，會產生較低頻的方波，作為 slow_clk。

其次，狀態機（FSM）負責處理遊戲邏輯，根據當前的遊戲狀態來決定接下來的動作。在 MovingR 狀態下，當球到達最右邊且右側玩家的開關 i_swR 被按下時，會將遊戲狀態轉為 MovingL，即表示右側球拍成功反彈球。如果球出界或者玩家提前按下按鈕，則遊戲進入 Lwin 狀態，表示左邊玩家得分。相似地，MovingL 狀態的邏輯處理左側玩家的開關，當球到達最左邊且左側玩家的開關 i_swL 被按下時，球會反彈並轉換到 MovingR，如果球出界則進入 Rwin 狀態。在 Lwin 和 Rwin 狀態下，遊戲會等待玩家按下對應的開關來重新開始發球。

第三個模塊是 LED 控制器（LED_PLED），它根據 slow_clk 和當前的遊戲狀態來更新 LED 顯示。在 MovingR 狀態下，會將 led_r 訊號向右邏輯移位，讓亮燈向右移動；在 MovingL 狀態下，則將 led_r 訊號向左邏輯移位，讓亮燈向左移動。而在 Lwin 或 Rwin 狀態下，會顯示一個勝利圖案（例如四個 LED 全部亮起），來提示玩家得分。

此外，設計中還包括計分模塊（score_L_p 和 score_R_p），用來追蹤左右玩家的得分。得分的增加僅在遊戲狀態從 MovingR 或 MovingL 轉換到 Lwin 或 Rwin 的瞬間進行，以此來保證在得分時更新分數。

總的來說，這個設計實現了一個完整的 FPGA 乒乓球遊戲，運用了狀態機來控制遊戲邏輯，並使用時脈除頻來調節 LED 的移動速度，達到可觀察的效果。玩家可以將此程式碼載入 FPGA 開發環境（如 Xilinx Vivado 或 Intel Quartus），並將腳位與硬體對應，即可開始遊戲。
